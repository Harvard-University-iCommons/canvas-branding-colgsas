var BLUE_CANVAS={appAPI:"https://harvard.bluera.com/harvardBlueConnector/api",canvasAPI:"https://test-blue-explorance.tlt.harvard.edu",domainName:"com.explorance",consumerID:"4ka4tx4nLdejNUrQDGL9zA==",defaultLanguage:"en-us",DisabledCustomData:!1,eventAdded:!1,localConstant:{COURSE_DETAIL:"DASHBOARD_COURSES",IS_USER_LOGEDIN:"IS_USER_LOGEDIN",BLUE_SERIOUS_TASKS_POPUP:"BLUE_SERIOUS_TASKS_POPUP",FEEDBACK_ID:"FEEDBACK_ID",ADMIN_SETTING:"ADMIN_SETTING",ASSIGNMENT_LINK:"ASSIGNMENT_LINK",COURSE_IDS:"COURSE_IDS",TOOl_NAME:"Course Evaluations",USER_IN_COURSE:"USER_IN_COURSE",CURRENT_COURSE_ID:"CURRENT_COURSE_ID",BLUE_SERIOUS_TASKS:[],ADMIN_BLOCKING_OPTION:"NONE",ADMIN_LOGINPOPUP_OPTION:"YES",BLUE_SERIOUS_TASKS_LOGINPOPUP:"BLUE_SERIOUS_TASKS_LOGINPOPUP",SERIOUS_TASKS_UNIQUE_COURSEIDS:"SERIOUS_TASKS_UNIQUE_COURSEIDS",LANGUAGE:ENV.BIGEASY_LOCALE.toLowerCase().replace("_","-")},AddEventToCalenderAgenda:function(){$.active>0?window.setTimeout("BLUE_CANVAS.AddEventToCalenderAgenda();",1e3):($(".agenda-event__item-container").unbind("click"),$(".agenda-event__item-container").click(function(){($(this).attr("aria-controls")==null||$(this).attr("aria-controls")==undefined)&&setTimeout(function(){$('[name*="blueFeedbackAssignmentLink"]').unbind("click");$('[name*="blueFeedbackAssignmentLink"]').click(function(){var n=this.name.split("_");n!=null&&n.length>1&&BLUE_CANVAS.PopUpCourseClick(n[1])})},"500")}))},AddEventToCalendar:function(){$.active>0?window.setTimeout("BLUE_CANVAS.AddEventToCalendar();",1e3):(BLUE_CANVAS.eventAdded==!1&&$(".navigation_buttons:first button").length>0&&(BLUE_CANVAS.eventAdded=!0,$(".navigation_buttons:first button").click(function(){window.setTimeout("BLUE_CANVAS.AddEventToCalendar();",1e3)}),$(".context-list-toggle-box").click(function(){window.setTimeout("BLUE_CANVAS.AddEventToCalendar();",1e3);window.setTimeout("BLUE_CANVAS.AddEventToCalenderAgenda();",1e3)}),$("#week").click(function(){window.setTimeout("BLUE_CANVAS.AddEventToCalendar();",1e3)}),$("#month").click(function(){window.setTimeout("BLUE_CANVAS.AddEventToCalendar();",1e3)}),$("#agenda").click(function(){window.setTimeout("BLUE_CANVAS.AddEventToCalenderAgenda();",1e3)}),$(".fc-toolbar:first button").click(function(){$(".fc-day-number").click(function(){window.setTimeout("BLUE_CANVAS.AddEventToCalendar();",1e3);window.setTimeout("BLUE_CANVAS.AddEventToCalenderAgenda();",1e3)})}),$(".fc-day-number").click(function(){window.setTimeout("BLUE_CANVAS.AddEventToCalendar();",1e3);window.setTimeout("BLUE_CANVAS.AddEventToCalenderAgenda();",1e3)})),$(".fc-event").unbind("click"),$(".fc-event").click(function(){($(this).attr("aria-controls")==null||$(this).attr("aria-controls")==undefined)&&setTimeout(function(){$('[name*="blueFeedbackAssignmentLink"]').unbind("click");$('[name*="blueFeedbackAssignmentLink"]').click(function(){var n=this.name.split("_");n!=null&&n.length>1&&BLUE_CANVAS.PopUpCourseClick(n[1])})},"500")}))},StoreCourseDetails:function(){var n=[],t=[];$.ajax({url:BLUE_CANVAS.canvasAPI+"/api/v1/courses",type:"GET",async:!1,success:function(i){i!=null&&i.length>0&&$.each(i,function(i,r){var u={id:r.id,originalName:r.name,href:"/courses/"+r.id};n.push(u);t.push(r.id)})},error:function(){console.log("Error in getcourses")}});localStorage.setItem(BLUE_CANVAS.localConstant.COURSE_DETAIL,JSON.stringify(n));localStorage.setItem(BLUE_CANVAS.localConstant.COURSE_IDS,t.join())},GetCourseDetails:function(){return JSON.parse(localStorage.getItem(BLUE_CANVAS.localConstant.COURSE_DETAIL))},GetAdminsettingFromLocal:function(){return JSON.parse(localStorage.getItem(BLUE_CANVAS.localConstant.ADMIN_SETTING))},GetCourseIDs:function(){var n=localStorage.getItem(BLUE_CANVAS.localConstant.COURSE_IDS);return n==null?"":n},ClosePopup:function(n){$("#"+n).detach();$("body").css("position","inherit")},FilterPendingTask:function(n){var t=[],i,r;return n!=null&&n.length>0&&(t=$.grep(n,function(n){return(n.Blockable=="true"||n.Blockable==!0)&&n.StartDate<=(new Date).toJSON()&&n.DueDate>=(new Date).toJSON()&&n.Language.toLowerCase()==BLUE_CANVAS.localConstant.LANGUAGE}),(t==null||t.length==0)&&(i=$.map(n,function(n){if(n.Language.match("^"+BLUE_CANVAS.localConstant.LANGUAGE.substring(0,2)))return n.Language.toLowerCase()}),i!=null&&i.length>0&&(t=$.grep(n,function(n){return(n.Blockable=="true"||n.Blockable==!0)&&n.StartDate<=(new Date).toJSON()&&n.DueDate>=(new Date).toJSON()&&n.Language.toLowerCase()==i[0]}))),t!=null&&t.length==0&&(t=$.grep(n,function(n){return(n.Blockable=="true"||n.Blockable==!0)&&n.StartDate<=(new Date).toJSON()&&n.DueDate>=(new Date).toJSON()&&n.Language.toLowerCase()==BLUE_CANVAS.defaultLanguage})),t!=null&&t.length==0&&(r=n[0].Language.toLowerCase(),t=$.grep(n,function(n){return(n.Blockable=="true"||n.Blockable==!0)&&n.StartDate<=(new Date).toJSON()&&n.DueDate>=(new Date).toJSON()&&n.Language.toLowerCase()==r}))),t},CommonPopUp:function(n,t,i,r,u){var f="";return f+="<style>label {-webkit-touch-callout: none;-webkit-user-select: none;-khtml-user-select: none;-moz-user-select: none;-ms-user-select: none;user-select: none;}",f+="input[type=checkbox].css-checkbox {position: absolute; overflow: hidden; clip: rect(0 0 0 0); height:1px; width:1px; margin:-1px;",f+="padding:0;border:0;}",f+="input[type=checkbox].css-checkbox + label.css-label {padding-left:25px;\theight:18px; display:inline-block;line-height:18px;background-repeat:no-repeat;background-position: 0 0;\tcursor:pointer;}",f+="input[type=checkbox].css-checkbox:checked + label.css-label {background-position: 0 -18px;}",f+=".css-label{background-image:url(https://harvard.bluera.com/harvardBlueConnector//Content/check.png);}",f+=".lite-green-check{background-image:url(https://harvard.bluera.com/harvardBlueConnector//Content/check.png);}",f+='div[id^="dvInner_"]{left:auto !important; margin:auto;}',f+='@media only screen and (max-width:700px){div[id^="dvInner_"]{top: 10% !important;}} @media only screen and (max-width:600px){div[id^="dvInner_"]{width:340px !important;margin-left:10px;} }<\/style>',(t==null||t=="")&&(t="https://harvard.bluera.com/harvardBlueConnector//Content/explorance-university.png"),f+='<div id="dvOuter" style="position: fixed; top: 0; left: 0; background: rgba(0,0,0,0.6); z-index: 1000; width: 100%; height: 100%;">',f+="<div id="+n+' style="position: relative; top: 25%; left: 30%; height: auto; width: 450px; z-index: 10; background: #fff; border-top: 3px solid rgb(66, 139, 202); box-shadow: 0px 2px 6px rgba(0,0,0,1); ">',f+='<div style="padding: 0.5%; padding-bottom: 4%;">',f+='<div style="text-align: center; box-shadow: lightGray 0px 1px; "><img style="height:75px" src='+t+" /><\/div>",f+='<h4 style="padding: 10px;color: #474644;font-size:13px; box-shadow: lightGray 0px 1px; text-align: center; "><b>'+i+"<\/b><\/h4>",f+='<div style="padding-left:10px;padding-right:10px;max-height: 150px;overflow-y: auto; overflow-x: hidden;">',f+=u,f+="<\/div>",f+="<\/div>",f+='<div style="padding: 10px; background-color: #f1e5e5; text-align: center">',f+=r,f+="<\/div>",f+="<\/div>",f+"<\/div>"},ShowLoader:function(){var n="";n+="<style> ";n+="#dvCanvasLoader {position: fixed;    top: 0;\tleft: 0;width: 100%;height: 100%;background: rgba(0,0,0,0.5);z-index:999999;} ";n+=".loaderMsg {width: 300px;\tposition: relative;overflow: hidden;left: 40%;top: 40%;text-align: center;font-size: 14px;color: #fff;font-family: Verdana, Geneva, sans-serif;} ";n+="@media screen and (-webkit-min-device-pixel-ratio:0){  .spinner div { width: 20px;height: 20px;position: absolute;left: -20px;top: 310px !important;background-color: #fff;border-radius: 50%;animation: move 4s infinite cubic-bezier(.2, .64, .81, .23);z-index: 9999; }} ";n+=".spinner div{width: 20px;\theight: 20px;position: absolute;left: -20px;top: 280px;background-color: #fff;border-radius: 50%;animation: move 4s infinite cubic-bezier(.2, .64, .81, .23);z-index: 9999;}";n+=".spinner div:nth-child(2){animation-delay: 100ms;}";n+=".spinner div:nth-child(3){animation-delay: 200ms;}";n+=".spinner div:nth-child(4){animation-delay: 300ms;}";n+="@keyframes move { 0% {left: 0%;} 75% {left:100%;} 100% {left:100%;}}";n+="<\/style>";n+='<div id="dvCanvasLoader"><div class="loaderMsg">Checking for incomplete evaluations<\/div>';n+='<div class="spinner"><div><\/div><div><\/div><div><\/div><div><\/div><\/div>';n+="<\/div>";$("body").append(n)},HideLoader:function(){$("#dvCanvasLoader").detach()},GetBlueAdminSetting:function(){$.ajax({url:BLUE_CANVAS.appAPI+"/Canvas/GetAdminSetting?language="+BLUE_CANVAS.localConstant.LANGUAGE,type:"GET",headers:{CONSUMERID:BLUE_CANVAS.consumerID},async:!1,success:function(n){n!=null&&localStorage.setItem(BLUE_CANVAS.localConstant.ADMIN_SETTING,JSON.stringify(n))},error:function(){console.log("Error in GetBlueAdminSetting function")}})},ShowLoginPopUp:function(){BLUE_CANVAS.ShowLoader();var n,t=!1;BLUE_CANVAS.DisabledCustomData?(n=BLUE_CANVAS.appAPI+"/Canvas/GetTaskDetails?studentId="+ENV.current_user_id+"&courseIds="+BLUE_CANVAS.GetCourseIDs()+"&language="+BLUE_CANVAS.localConstant.LANGUAGE,$.ajax({url:BLUE_CANVAS.canvasAPI+"/api/v1/users/self/custom_data?ns="+BLUE_CANVAS.domainName,type:"GET",success:function(n){n!=null&&n.data.NoPopUpAgain!=null&&n.data.NoPopUpAgain!=undefined&&(t=n.data.NoPopUpAgain)},error:function(){}})):n=BLUE_CANVAS.canvasAPI+"/api/v1/users/self/custom_data?ns="+BLUE_CANVAS.domainName;$.ajax({url:n,type:"GET",headers:{CONSUMERID:BLUE_CANVAS.consumerID},success:function(n){if(n!=null&&n!=undefined){var i=[];BLUE_CANVAS.DisabledCustomData?n.Tasks!=null&&(i=n.Tasks):n.data!=null&&(t=n.data.NoPopUpAgain,n.data.BlueTaskData!=null&&n.data.BlueTaskData.TaskList!=null&&(i=n.data.BlueTaskData.TaskList));BLUE_CANVAS.ShowPendingTaskPopUp(i,t)}BLUE_CANVAS.HideLoader()},error:function(){BLUE_CANVAS.HideLoader();console.log("Error")}})},ShowPendingTaskPopUp:function(n,t){var s=[],i=BLUE_CANVAS.GetAdminsettingFromLocal(),f,h,u,e,o,r,c,l;if(i!=null&&n!=null&&n.length>0&&(f=BLUE_CANVAS.GetCourseIDs(),f!=null&&f!=""&&(f=f.split(","),h=$.grep(n,function(n){return $.inArray(n.CourseID,f)!=-1}),h!=null&&h.length>0&&(s=BLUE_CANVAS.DisabledCustomData?h:BLUE_CANVAS.FilterPendingTask(h),s!=null&&s.length>0&&(u={Ids:[],PopUpList:[]},$.each(s,function(n,t){if($.inArray(t.CourseID,u.Ids)==-1){u.Ids.push(t.CourseID);var i={CourseId:t.CourseID,Course:$.grep(BLUE_CANVAS.GetCourseDetails(),function(n){return n.id==t.CourseID}),DueDates:$.map(s,function(n){if(n.CourseID==t.CourseID)return new Date(n.DueDate)})},r=new Date(Math.min.apply(null,i.DueDates));i.Course.length>0&&u.PopUpList.push({CourseName:i.Course[0].originalName,DueDate:r.toString("dd MMM,yyyy"),Link:i.Course[0].href,CourseID:i.Course[0].id})}}),u.PopUpList.length>0))))){for(e="",e+='<table style="font-size:13px;width:100%">',o=0;o<u.PopUpList.length;o++)e+='<tr><td><a style="cursor:pointer;color:#1c70ed;" href="#"  onclick="BLUE_CANVAS.PopUpCourseClick('+u.PopUpList[o].CourseID+');" >'+u.PopUpList[o].CourseName+'<\/a><\/td><td align="right" > '+i.DueLabel+" "+u.PopUpList[o].DueDate+"<\/td><\/tr>";e+="<\/table>";r="";r+='<div style="float:left;padding-top:10px;padding-left: 10px;">';i.PendingTaskPopUpViewModel.CheckboxText!=""&&i.PendingTaskPopUpViewModel.CheckboxText!=null&&(r+='<input  class="css-checkbox" type="checkbox" id="chkDoNotShow" />',r+='<label for="chkDoNotShow"  class="css-label lite-green-check">'+i.PendingTaskPopUpViewModel.CheckboxText+"<\/label>");r+="<\/div>";r+='<div style="text-align:right;padding:10px;">';r+='<input type="button" value="'+i.PendingTaskPopUpViewModel.ButtonText+'"  class="Button Button--primary Button--active" style="white-space: normal;  margin-top: 10px;"  onclick="BLUE_CANVAS.BtnPendingPopUpClick(\'dvOuter\');"  id="btnPendingOk"  />';r+="<\/div>";c=BLUE_CANVAS.CommonPopUp("dvInner_SeriousTask",i.LogoUrl,i.PendingTaskPopUpViewModel.HeaderText,r,e);i.PendingTaskPopUpViewModel.ShowPendingPopup=="YES"&&(t==undefined||t==null||t==""||t!=null&&t!=!0&&t!="true")&&$("body").append(c);r="";r+=i.BlockingOptionViewModel.BlockingOption=="GB"?'<input type="button" class="Button Button--primary Button--active" style="white-space: normal; margin-top: 10px;"   onclick="BLUE_CANVAS.ClosePopup(\'dvOuter\');" value="'+i.BlockingOptionViewModel.ButtonText+'" id="btnDoLater" />':'<input type="button"  class="Button Button--primary Button--active" style="white-space: normal; margin-top: 10px;"   onclick="BLUE_CANVAS.RedirectToDashBoard(\'dvOuter\');" value="'+i.BlockingOptionViewModel.ButtonText+'" id="btnDoLater" />';l=BLUE_CANVAS.CommonPopUp("dvInner_SeriousTask",i.LogoUrl,i.BlockingOptionViewModel.HeaderText,r,e);localStorage.setItem(BLUE_CANVAS.localConstant.BLUE_SERIOUS_TASKS_LOGINPOPUP,l)}},BtnPendingPopUpClick:function(n){$("#chkDoNotShow").is(":checked")&&BLUE_CANVAS.DisablePopup();BLUE_CANVAS.ClosePopup(n)},DisablePopup:function(){var n={ns:BLUE_CANVAS.domainName,data:!0};$.ajax({url:BLUE_CANVAS.canvasAPI+"/api/v1/users/self/custom_data/NoPopUpAgain",type:"PUT",data:n,dataType:"json",success:function(){console.log("custom data saved.")},error:function(){}})},BlockCourse:function(n){var i=window.location.toString().toLowerCase().split("/"),t=BLUE_CANVAS.GetAdminsettingFromLocal(),u,r;t!=null&&t.BlockingOptionViewModel!=null&&t.BlockingOptionViewModel.BlockingOption!="NONE"&&(localStorage.getItem(BLUE_CANVAS.localConstant.BLUE_SERIOUS_TASKS_POPUP)==undefined||localStorage.getItem(BLUE_CANVAS.localConstant.BLUE_SERIOUS_TASKS_POPUP)==null||localStorage.getItem(BLUE_CANVAS.localConstant.BLUE_SERIOUS_TASKS_POPUP)==""?localStorage.getItem(BLUE_CANVAS.localConstant.USER_IN_COURSE)==undefined||localStorage.getItem(BLUE_CANVAS.localConstant.USER_IN_COURSE)==null||localStorage.getItem(BLUE_CANVAS.localConstant.USER_IN_COURSE)==""?(BLUE_CANVAS.ShowLoader(),localStorage.setItem(BLUE_CANVAS.localConstant.USER_IN_COURSE,!0),u=BLUE_CANVAS.DisabledCustomData?BLUE_CANVAS.appAPI+"/Canvas/GetTaskDetails?studentId="+ENV.current_user_id+"&courseIds="+BLUE_CANVAS.GetCourseIDs()+"&language="+BLUE_CANVAS.localConstant.LANGUAGE:BLUE_CANVAS.canvasAPI+"/api/v1/users/self/custom_data?ns="+BLUE_CANVAS.domainName,$.ajax({url:u,type:"GET",headers:{CONSUMERID:BLUE_CANVAS.consumerID},success:function(r){var e,o,s,u,h,f,a,l,c;if(BLUE_CANVAS.DisabledCustomData?e=r.Tasks:r!=null&&r.data!=null&&r.data.BlueTaskData!=null&&r.data.BlueTaskData.TaskList!=null&&r.data.BlueTaskData.TaskList.length>0&&(e=r.data.BlueTaskData.TaskList),e!=null&&e.length>0&&(o=[],$.each(e,function(n,t){$.inArray(t.CourseID,o)==-1&&o.push(t.CourseID)}),localStorage.setItem(BLUE_CANVAS.localConstant.SERIOUS_TASKS_UNIQUE_COURSEIDS,o),(i.length==6||i.length==7)&&i[5]=="grades"&&BLUE_CANVAS.GradeBlockDDLAction(o),s=$.grep(e,function(t){return t.CourseID==n}),s!=null&&s.length>0&&(u=BLUE_CANVAS.DisabledCustomData?s:BLUE_CANVAS.FilterPendingTask(s),u!=null&&u.length>0))){for(h="",h+='<table style="font-size:13px;width:100%"">',f=0;f<u.length;f++)a=u[f].Name.substring(0,35)+"...",h+="<tr><td><a style=\"cursor:pointer;color:#1c70ed;\" onclick=\"BLUE_CANVAS.ClosePopup('dvOuter');BLUE_CANVAS.NavigateToTask('"+u[f].Link+'\');" href="javascript:void(0);" title="'+u[f].Name+'">'+a+'<\/a><\/td><td align="right" > '+t.DueLabel+" "+new Date(u[f].DueDate).toString("dd MMM,yyyy")+"<\/td><\/tr>";h+="<\/table>";l="";l+=t.BlockingOptionViewModel.BlockingOption=="GB"?'<input type="button" class="Button Button--primary Button--active" style="white-space: normal; margin-top: 10px;"    onclick="BLUE_CANVAS.ClosePopup(\'dvOuter\');" value="'+t.BlockingOptionViewModel.ButtonText+'" id="btnDoLater" />':'<input type="button"  class="Button Button--primary Button--active" style="white-space: normal; margin-top: 10px; "  onclick="BLUE_CANVAS.RedirectToDashBoard(\'dvOuter\');" value="'+t.BlockingOptionViewModel.ButtonText+'" id="btnDoLater" />';c="";c=BLUE_CANVAS.CommonPopUp("dvInner_CoursePending",t.LogoUrl,t.BlockingOptionViewModel.HeaderText,l,h);localStorage.setItem(BLUE_CANVAS.localConstant.BLUE_SERIOUS_TASKS_POPUP,c);BLUE_CANVAS.ShowBlocking(c,t,n)}BLUE_CANVAS.HideLoader()},error:function(){BLUE_CANVAS.HideLoader()}})):(i.length==6||i.length==7)&&i[5]=="grades"&&(r=localStorage.getItem(BLUE_CANVAS.localConstant.SERIOUS_TASKS_UNIQUE_COURSEIDS),r!=null&&(r=r.split(","),BLUE_CANVAS.GradeBlockDDLAction(r))):(BLUE_CANVAS.ShowBlocking(localStorage.getItem(BLUE_CANVAS.localConstant.BLUE_SERIOUS_TASKS_POPUP),t,n),BLUE_CANVAS.HideLoader()))},ShowBlocking:function(n,t,i){if(t.BlockingOptionViewModel.BlockingOption=="GB"){var r=window.location.toString().toLowerCase().split("/");(r.length==6||r.length==7)&&r[5]=="grades"&&($("#right-side-wrapper").hide(),$("#content").hide(),$("body").append(n));$(".section a")!=null&&$(".section a").length!=0?$(".section a").click(function(t){var i=$(this);i!=null&&i[0].pathname!=null&&i[0].pathname!=""&&i[0].pathname.match("^/courses")&&i[0].pathname.match("grades$")&&(t.preventDefault(),$("body").append(n))}):$("#left-side a").click(function(t){var i=$(this);i!=null&&i[0].pathname!=null&&i[0].pathname!=""&&i[0].pathname.match("^/courses")&&i[0].pathname.match("grades$")&&(t.preventDefault(),$("body").append(n))})}else $(".section a")!=null&&$(".section a").length!=0?$(".section a").click(function(t){var i=$(this);i!=null&&i[0].pathname!=null&&i[0].pathname!=""&&i[0].pathname.match("^/courses")&&!i[0].text.match(BLUE_CANVAS.localConstant.TOOl_NAME+"$")&&(t.preventDefault(),$("#right-side-wrapper").hide(),$("#content").hide(),$("body").append(n))}):$("#left-side a").click(function(t){var i=$(this);i!=null&&i[0].pathname!=null&&i[0].pathname!=""&&i[0].pathname.match("^/courses")&&!i[0].text.match(BLUE_CANVAS.localConstant.TOOl_NAME+"$")&&(t.preventDefault(),$("#right-side-wrapper").hide(),$("#content").hide(),$("body").append(n))}),BLUE_CANVAS.GetExternalToolId(),window.location.href!=BLUE_CANVAS.canvasAPI+"/courses/"+i+"/external_tools/"+localStorage.getItem(BLUE_CANVAS.localConstant.FEEDBACK_ID)&&($("#right-side-wrapper").hide(),$("#content").hide(),$("body").append(n))},RedirectToDashBoard:function(){window.location.href=BLUE_CANVAS.canvasAPI},PopUpCourseClick:function(n){BLUE_CANVAS.GetExternalToolId();window.location.href=BLUE_CANVAS.canvasAPI+"/courses/"+n+"/external_tools/"+localStorage.getItem(BLUE_CANVAS.localConstant.FEEDBACK_ID)},GetExternalToolId:function(){if(localStorage.getItem(BLUE_CANVAS.localConstant.FEEDBACK_ID)==undefined||localStorage.getItem(BLUE_CANVAS.localConstant.FEEDBACK_ID)==null||localStorage.getItem(BLUE_CANVAS.localConstant.FEEDBACK_ID)==""){var n=BLUE_CANVAS.GetCourseDetails();n!=null&&n.length>0&&$.ajax({url:BLUE_CANVAS.canvasAPI+"/api/v1/courses/"+n[0].id+"/tabs?include[]=external",type:"GET",async:!1,success:function(n){if(n!=null)for(i=1;i<n.length;i++)if(n[i].label==BLUE_CANVAS.localConstant.TOOl_NAME){var t=n[i].full_url.split("/");localStorage.setItem(BLUE_CANVAS.localConstant.FEEDBACK_ID,t[6])}}})}},NavigateToTask:function(n){var i='<iframe allowfullscreen="true" style="min-height: 650px;" class="tool_launch" id="tool_content" mozallowfullscreen="true" name="tool_content" src="'+n+'" tabindex="0" title="Tool Content" webkitallowfullscreen="true"><\/iframe>',t;jQuery("#content").html(i);$("#content").show();jQuery("#right-side-wrapper").hide();jQuery("#left-side li.section a.active").removeClass("active");t=jQuery('#left-side li.section a[class*="context_external_tool"]:contains("'+BLUE_CANVAS.localConstant.TOOl_NAME+'")').filter(function(){return $(this).text().trim().toLowerCase()==BLUE_CANVAS.localConstant.TOOl_NAME.toLowerCase()});t!=null&&t.length>0&&t.addClass("active")},ResetStudentCustomData:function(){$("#btnResetLoginPopUp").prop("disabled",!0);var n=window.location.toString().toLowerCase().split("/"),t=n[n.length-1];$.ajax({url:BLUE_CANVAS.appAPI+"/Canvas/ResetStudentsSettings?adminUserID="+ENV.current_user_id+"&accountID="+t+"&domainName="+BLUE_CANVAS.domainName,type:"GET",headers:{CONSUMERID:BLUE_CANVAS.consumerID},success:function(){console.log("Custom Data is saved.")},error:function(){}})},GradeBlockDDLAction:function(n){$("#course_url option").each(function(){var i=$(this).val(),t=i.split("/");t[2]!=null&&t[2]!=""&&$.inArray(t[2],n)!=-1&&$(this).remove()})},ClearLocalStorage:function(){localStorage.removeItem(BLUE_CANVAS.localConstant.IS_USER_LOGEDIN);localStorage.removeItem(BLUE_CANVAS.localConstant.COURSE_DETAIL);localStorage.removeItem(BLUE_CANVAS.localConstant.FEEDBACK_ID);localStorage.removeItem(BLUE_CANVAS.localConstant.ADMIN_SETTING);localStorage.removeItem(BLUE_CANVAS.localConstant.COURSE_IDS);localStorage.removeItem(BLUE_CANVAS.localConstant.BLUE_SERIOUS_TASKS_POPUP);localStorage.removeItem(BLUE_CANVAS.localConstant.CURRENT_COURSE_ID);localStorage.removeItem(BLUE_CANVAS.localConstant.BLUE_SERIOUS_TASKS_LOGINPOPUP);localStorage.removeItem(BLUE_CANVAS.localConstant.SERIOUS_TASKS_UNIQUE_COURSEIDS)},AddLogoutEvent:function(){var n=$("form[action$='logout']>button[type='submit']");n!=null&&n.length>0&&n.each(function(){$(this).click(function(){BLUE_CANVAS.ClearLocalStorage()})})}};$(function(){var n=window.location.toString().toLowerCase().split("/"),t;if((document.referrer.indexOf("login")>0||document.referrer.indexOf(window.location.hostname)==-1)&&document.referrer!=""&&document.referrer.indexOf("login_success")==-1&&BLUE_CANVAS.ClearLocalStorage(),ENV.current_user_id==null&&window.location.toString().toLowerCase().indexOf("login")!=-1?BLUE_CANVAS.ClearLocalStorage():n.length==4&&(n[3]==""||n[3].indexOf("login_success")!=-1)&&BLUE_CANVAS.StoreCourseDetails(),$.inArray("admin",ENV.current_user_roles)!==-1?n.length>4&&n[3]=="accounts":$.inArray("teacher",ENV.current_user_roles)!==-1&&n.length>4&&n[3]=="courses"&&(n.length==5||n[5]==""),$.inArray("student",ENV.current_user_roles)!==-1){if(n.length==4&&(n[3]==""||n[3].indexOf("login_success")>0)&&((localStorage.getItem(BLUE_CANVAS.localConstant.IS_USER_LOGEDIN)==null||localStorage.getItem(BLUE_CANVAS.localConstant.IS_USER_LOGEDIN)==undefined)&&(BLUE_CANVAS.GetBlueAdminSetting(BLUE_CANVAS.domainName),BLUE_CANVAS.ShowLoginPopUp(),localStorage.setItem(BLUE_CANVAS.localConstant.IS_USER_LOGEDIN,!0)),t=BLUE_CANVAS.GetAdminsettingFromLocal(),t!=null&&t.BlockingOptionViewModel!=null&&t.BlockingOptionViewModel.BlockingOption!="NONE"))$("#right-side-wrapper").on("click","a[href='/grades']",function(){var n=localStorage.getItem(BLUE_CANVAS.localConstant.BLUE_SERIOUS_TASKS_LOGINPOPUP);n!=undefined&&n!=null&&n!=""&&(this.href="javascript:void(0)",this.onclick=function(){$("body").append(n)},$("body").append(n))});n.length>4&&n[3]=="courses"?(localStorage.getItem(BLUE_CANVAS.localConstant.CURRENT_COURSE_ID)!=n[4]&&(localStorage.removeItem(BLUE_CANVAS.localConstant.BLUE_SERIOUS_TASKS_POPUP),localStorage.removeItem(BLUE_CANVAS.localConstant.USER_IN_COURSE),localStorage.removeItem(BLUE_CANVAS.localConstant.SERIOUS_TASKS_UNIQUE_COURSEIDS),localStorage.setItem(BLUE_CANVAS.localConstant.CURRENT_COURSE_ID,n[4])),(localStorage.getItem(BLUE_CANVAS.localConstant.ASSIGNMENT_LINK)==undefined||localStorage.getItem(BLUE_CANVAS.localConstant.ASSIGNMENT_LINK)==null||localStorage.getItem(BLUE_CANVAS.localConstant.ASSIGNMENT_LINK)=="")&&BLUE_CANVAS.BlockCourse(n[4])):(localStorage.removeItem(BLUE_CANVAS.localConstant.BLUE_SERIOUS_TASKS_POPUP),localStorage.removeItem(BLUE_CANVAS.localConstant.USER_IN_COURSE),localStorage.removeItem(BLUE_CANVAS.localConstant.CURRENT_COURSE_ID));$('[name*="blueFeedbackAssignmentLink"]').click(function(){if(n.length>4&&n[3]=="courses"){var t=this.name.split("_");t!=null&&t.length>1&&BLUE_CANVAS.PopUpCourseClick(t[1])}});n.length>3&&n[3].indexOf("calendar")!=-1&&(window.setTimeout("BLUE_CANVAS.AddEventToCalendar();",1e3),window.setTimeout("BLUE_CANVAS.AddEventToCalenderAgenda();",1e3),$(".navigation_buttons:first button").length>0&&(BLUE_CANVAS.eventAdded=!0,$(".navigation_buttons:first button").click(function(){window.setTimeout("BLUE_CANVAS.AddEventToCalendar();",1e3)}),$(".context-list-toggle-box").click(function(){window.setTimeout("BLUE_CANVAS.AddEventToCalendar();",1e3);window.setTimeout("BLUE_CANVAS.AddEventToCalenderAgenda();",1e3)}),$("#week").click(function(){window.setTimeout("BLUE_CANVAS.AddEventToCalendar();",1e3)}),$("#month").click(function(){window.setTimeout("BLUE_CANVAS.AddEventToCalendar();",1e3)}),$("#agenda").click(function(){window.setTimeout("BLUE_CANVAS.AddEventToCalenderAgenda();",1e3)}),$(".fc-toolbar:first button").click(function(){$(".fc-day-number").click(function(){window.setTimeout("BLUE_CANVAS.AddEventToCalendar();",1e3);window.setTimeout("BLUE_CANVAS.AddEventToCalenderAgenda();",1e3)})}),$(".fc-day-number").click(function(){window.setTimeout("BLUE_CANVAS.AddEventToCalendar();",1e3);window.setTimeout("BLUE_CANVAS.AddEventToCalenderAgenda();",1e3)})));$('[name*="blueFeedbackAnnouncementLink"]').click(function(){var n=this.name.split("_");n!=null&&n.length>1&&BLUE_CANVAS.PopUpCourseClick(n[1])})}$("#global_nav_profile_link").click(function(){window.setTimeout("BLUE_CANVAS.AddLogoutEvent();",500)})});